# Permissions Required
# API [deploymentmanager.googleapis.com]
# Identity and Access Management (IAM) API
# Compute API

imports:
  - path: ./../../py_templates/cloud_iam/roles/custom_compute_role.py
    name: custom_compute_role.py
  - path: ./../../py_templates/cloud_iam/roles/custom_storage_role.py
    name: custom_storage_role.py
  - path: ./../../py_templates/cloud_iam/service_accounts/compute_service_account.py
    name: compute_service_account.py
  - path: ./../../py_templates/cloud_iam/service_accounts/instance_service_account.py
    name: instance_service_account.py
  - path: ./../../py_templates/cloud_iam/iam_bindings/isa_self_iam_bind.py
    name: isa_self_iam_bind.py
  - path: ./../../py_templates/cloud_storage/qubole_defloc/qubole_defloc.py
    name: qubole_defloc.py

resources:
  - name: qu_custom_storage_role
    type: custom_storage_role.py
    properties:
      project: qubole-on-gcp
      roleId: qubole_custom_storage_role_acc422
      title: qubole_custom_storage_role
      description: qubole_custom_storage_role
  - name: qu_custom_compute_role
    type: custom_compute_role.py
    properties:
      project: qubole-on-gcp
      roleId: qubole_custom_compute_role_acc422
      title: qubole_custom_compute_role
      description: qubole_custom_compute_role
  - name: qu_compute_service_account
    type: compute_service_account.py
    properties:
      project: qubole-on-gcp
      accountId: qubole-compute-service-acc
      displayName: qubole-compute-service-acc
      qubole-service-account: qbol-422-gcp@prod-qsa-project-1.iam.gserviceaccount.com
  - name: qu_instance_service_account
    type: instance_service_account.py
    properties:
      project: qubole-on-gcp
      accountId: qubole-instance-service-acc
      displayName: qubole-instance-service-acc
  - name: isa_self_iam_bind
    type: isa_self_iam_bind.py
  - name: qubole_default_location
    type: qubole_defloc.py
    properties:
      project: qubole-on-gcp
      org: vihag_acc422